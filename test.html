<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  body

  

  <script>
    
    const nodes = {
      value: 'A',
      left: {
        value: 'B',
        left: {
          value: 'D',
        },
        right: {
          value: 'E'
        }
      },
      right: {
        value: 'C',
        left: {
          value: 'F'
        }
      }
    }

    function deepCope(obj, map = new Map()) {
      
      // 原生方法需要重新构建比如：基础类型，Date, RegExp等
      if (typeof obj === null) return obj

      if (obj instanceof Date) return new Date(obj)
      if (obj instanceof RegExp) return new RegExp(obj)

      if (typeof obj !== "object") return obj

      if (map.get(obj)) return map.get(obj)

      const object = Array.isArray(obj) ? [] : {}

      map.set(obj, object)

      for(let key in obj) {
        if (obj.hasOwnProperty(key)) {
          object[key] = deepCope(obj[key])
        }
      }

      return object
    }

    const result = deepCope(nodes)

    console.log("result", result)

  </script>
</body>

</html>